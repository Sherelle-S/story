thats that pain



// Variables to manage timers
let idleTimeout;
let sessionTimeout;
const logoutURL = "logout.aspx";
const sessionDuration = 9 * 60 * 60 * 1000; // 9 hours in milliseconds
const warningDuration = 30 * 60 * 1000; // 30 minutes in milliseconds
const idleTimer = 60 * 60 * 1000; // 60 minutes in milliseconds
let lastActivity = Date.now();

// Reset idle timer
function resetIdleTimer() {
    clearTimeout(idleTimeout);

    idleTimeout = setTimeout(function() {
        console.log("Logging out due to inactivity.");
        window.location.href = logoutURL;
    }, idleTimer - (Date.now() - lastActivity));
    console.log("Idle timer reset.");
}

// Start session timer
function startSessionTimer() {
    sessionTimeout = setTimeout(function() {
        console.log("Logging out due to inactivity.");
        window.location.href = logoutURL;
    }, sessionDuration - (Date.now() - lastActivity));

    warningTimeout = setTimeout(function() {
        alert("Your session will expire in 30 minutes. Please save your work.");
    }, sessionDuration - warningDuration - (Date.now() - lastActivity));
}

// Track activity events
document.body.addEventListener("mousemove", resetIdleTimer);
document.body.addEventListener("keydown", resetIdleTimer);

// Log remaining time until logout every minute
function logRemainingTime() {
    setInterval(function() {
        const now = Date.now();
        const elapsed = now - lastActivity;
        const idleTimeRemaining = idleTimer - elapsed;
        const sessionRemaining = sessionDuration - elapsed;

        console.log("Minutes until inactivity logout: " + Math.floor(idleTimeRemaining / 60000));
        console.log("Minutes until session logout: " + Math.floor(sessionRemaining / 60000));
    }, 60000); // Log every minute
}

// Check if the page was refreshed
if (window.performance.navigation.type === 1) {
    // Adjust timers or take any necessary action
    // For example, you might want to cancel the sessionTimeout here
    // and restart it after the page has fully loaded.
    console.log("Page was refreshed. Resuming timers...");
}

// Start the script
startSessionTimer();
resetIdleTimer();
logRemainingTime();
